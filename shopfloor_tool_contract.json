{
  "toolName": "WaterPlantGraphTool",
  "version": "0.1.0",
  "description": "Query water treatment plant graph for pumps, tanks, pipelines, sensors, operators, and maintenance records.",
  "timeouts": {
    "defaultMs": 15000
  },
  "auth": {
    "type": "none"
  },
  "operations": {
    "abnormalWaterQuality": {
      "description": "List assets whose linked water quality sensors exceed a threshold.",
      "inputs": {
        "threshold": {
          "type": "number",
          "required": true
        },
        "parameter": {
          "type": "string",
          "required": true,
          "example": "turbidity"
        },
        "unit": {
          "type": "string",
          "required": true,
          "example": "NTU"
        }
      },
      "cypher": "MATCH (a:Asset)-[:MONITORED_BY]->(s:WaterSensor) WHERE s.parameter = $parameter AND s.reading > $threshold AND s.unit = $unit RETURN a.id AS assetId, s.id AS sensorId, s.reading AS reading, s.timestamp AS at ORDER BY reading DESC",
      "outputs": [
        {
          "name": "assetId",
          "type": "string"
        },
        {
          "name": "sensorId",
          "type": "string"
        },
        {
          "name": "reading",
          "type": "number"
        },
        {
          "name": "at",
          "type": "string"
        }
      ],
      "examples": [
        {
          "inputs": {
            "threshold": 5.0,
            "parameter": "turbidity",
            "unit": "NTU"
          }
        }
      ]
    },

    "overdueMaintenanceTasks": {
      "description": "Find water plant assets that have overdue maintenance tasks.",
      "inputs": {},
      "cypher": "MATCH (a:Asset)-[:HAS_MAINTENANCE_TASK]->(m:MaintenanceTask) WHERE m.status = 'Overdue' RETURN a.id AS assetId, m.id AS taskId, m.scheduledTime AS due ORDER BY due ASC",
      "outputs": [
        {
          "name": "assetId",
          "type": "string"
        },
        {
          "name": "taskId",
          "type": "string"
        },
        {
          "name": "due",
          "type": "string"
        }
      ],
      "examples": [
        {
          "inputs": {}
        }
      ]
    },

    "currentOperator": {
      "description": "Get the current operator responsible for a water plant asset.",
      "inputs": {
        "assetId": {
          "type": "string",
          "required": true
        }
      },
      "cypher": "MATCH (a:Asset {id: $assetId})-[r:OPERATED_BY]->(o:Operator) RETURN a.id AS assetId, o.id AS operatorId, o.name AS operatorName, r.shift AS shift",
      "outputs": [
        {
          "name": "assetId",
          "type": "string"
        },
        {
          "name": "operatorId",
          "type": "string"
        },
        {
          "name": "operatorName",
          "type": "string"
        },
        {
          "name": "shift",
          "type": "string"
        }
      ],
      "examples": [
        {
          "inputs": {
            "assetId": "PUMP-01"
          }
        }
      ]
    },

    "sensorsByZone": {
      "description": "List water sensors attached to assets located in a given plant zone.",
      "inputs": {
        "zoneId": {
          "type": "string",
          "required": true
        }
      },
      "cypher": "MATCH (z:PlantZone {id: $zoneId})<-[:LOCATED_IN]-(a:Asset)-[:MONITORED_BY]->(s:WaterSensor) RETURN z.id AS zoneId, a.id AS assetId, s.id AS sensorId, s.parameter AS parameter, s.reading AS reading, s.unit AS unit",
      "outputs": [
        {
          "name": "zoneId",
          "type": "string"
        },
        {
          "name": "assetId",
          "type": "string"
        },
        {
          "name": "sensorId",
          "type": "string"
        },
        {
          "name": "parameter",
          "type": "string"
        },
        {
          "name": "reading",
          "type": "number"
        },
        {
          "name": "unit",
          "type": "string"
        }
      ],
      "examples": [
        {
          "inputs": {
            "zoneId": "ZONE-A"
          }
        }
      ]
    },

    "dueForInspection": {
      "description": "Assets whose last inspection is older than a cutoff datetime.",
      "inputs": {
        "cutoff": {
          "type": "string",
          "required": true,
          "example": "2025-10-01T00:00:00Z"
        }
      },
      "cypher": "MATCH (a:Asset) WHERE a.lastInspection < datetime($cutoff) RETURN a.id AS assetId, a.lastInspection AS lastInspection ORDER BY lastInspection ASC",
      "outputs": [
        {
          "name": "assetId",
          "type": "string"
        },
        {
          "name": "lastInspection",
          "type": "string"
        }
      ],
      "examples": [
        {
          "inputs": {
            "cutoff": "2025-10-01T00:00:00Z"
          }
        }
      ]
    }
  }
}
